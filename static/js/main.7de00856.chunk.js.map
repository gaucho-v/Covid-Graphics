{"version":3,"sources":["components/UI/Loader/Loader.js","components/Chart/utils.js","components/Chart/VirusChart.js","components/Chart/Chart.js","components/ChartsList.js","contants.js","components/Search/Search.js","api/index.js","HOCs/withIsMobile.js","App.js","index.js"],"names":["Loader","className","LastData","styled","div","StatLastData","translations","confirmed","cured","deaths","tooltipFormatter","value","name","VirusChart","location","isMobile","placeDaysWeeks","statistics","map","el","date","slice","width","window","innerWidth","height","data","dataKey","strokeDasharray","formatter","wrapperStyle","zIndex","type","stroke","r","RelativeForGraphics","LastStatistic","LocationName","h3","CloseButton","span","Chart","this","props","title","onRemoveChart","onClick","CloseSquareTwoTone","currentData","length","prevData","beforePrevData","lastDate","isUpdate","properties","Object","keys","prop","index","key","style","fontSize","values","color","showLastData","PureComponent","Graphics","ChartsList","selected","locationName","locationData","searchString","toLowerCase","trim","find","en","ru","findLocation","INITIAL_LOCATIONS","SearchGroup","FilteredLocations","FilteredLocationStyle","TextInFindPlaced","List","ul","Text","onscroll","header","document","getElementById","pageYOffset","classList","add","remove","Search","search","onChange","onAddPlace","filteredLocations","locationsData","useState","isFilteredLocations","onChangeIsFilteredLocation","inputStyle","btnStyle","onSubmit","e","preventDefault","id","placeholder","borderRadius","target","onBlur","f","splice","confirmedInLocation","DataApi","getStats","axios","get","then","dataString","dataContent","substring","indexOf","JSON","parse","cities","countries","russianSubjects","subjects","catch","console","log","withIsMobile","ComponentToExtend","checkIfIsMobile","setState","state","debounce","addEventListener","removeEventListener","Component","GlobalStyle","createGlobalStyle","Container","CovidGraphics","h1","selectedLocations","localStorage","split","isLoading","saveLocations","setItem","filterLocation","filteredDataRu","filter","includes","filteredDataEn","handleSearchChange","Set","handleClickOutSearch","handleAddPlace","place","searchedPlace","message","error","reduce","acc","push","info","handleRemoveLocation","res","onbeforeunload","LineChartOutlined","ReactDOM","render"],"mappings":"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","file":"static/js/main.7de00856.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Loader.css'\r\n\r\nconst Loader = () => (\r\n  <div className='loader'>\r\n    <h2>Пожалуйста, подождите...</h2>\r\n    <div className=\"lds-spinner\">\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Loader","import React from 'react';\r\nimport styled from \"styled-components\";\r\n\r\nconst LastData = styled.div`\r\n    display: flex;\r\n    border: 1px solid #b8b8b8;\r\n    z-index: -1;\r\n     @media (max-width: 900px) {\r\n     border: 1px solid #b8b8b8;\r\n     border-bottom: none;\r\n    }\r\n`;\r\nconst StatLastData = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: 0 5px;\r\n`;\r\n\r\nexport const showLastData = ({statistics}) => {\r\n  const currentData = statistics[statistics.length - 1];\r\n  const prevData = statistics[statistics.length - 2];\r\n  const beforePrevData = statistics[statistics.length - 3];\r\n  const lastDate = prevData.date.slice(5,10);\r\n  const isUpdate = currentData.confirmed > prevData.confirmed;\r\n  const properties = {\r\n    'confirmed': 'заболели',\r\n    'cured': 'выздоровели',\r\n    'deaths': 'умерли'\r\n  };\r\n  if (isUpdate) {\r\n    return (\r\n      <div>\r\n        <LastData>\r\n          {Object.keys(properties).map((prop, index) => (\r\n            <StatLastData key={`${index}.${prop}`}>\r\n              <span><b style={{fontSize: 'larger'}}>{currentData[Object.keys(properties)[index]]}</b></span>\r\n              <span>{Object.values(properties)[index]}</span>\r\n              {prop === 'cured'? <span style={{color: '#ff1a1a'}}>+{currentData[prop] - prevData[prop]}</span> :\r\n                <span style={{color: 'green'}}>+{currentData[prop] - prevData[prop]}</span>}\r\n            </StatLastData>\r\n          ))}\r\n        </LastData>\r\n      </div>\r\n    );\r\n  }\r\n  else {\r\n    return (\r\n      <div>\r\n        <span>Статистика за: <b>{lastDate}</b></span>\r\n        <LastData>\r\n          {Object.keys(properties).map((prop, index) => (\r\n            <StatLastData key={`${index}.${prop}`}>\r\n              <span><b style={{fontSize: 'larger'}}>{prevData[Object.keys(properties)[index]]}</b></span>\r\n              <span>{Object.values(properties)[index]}</span>\r\n              {prop === 'cured' ?\r\n                <span style={{color: '#ff1a1a'}}>+{prevData[prop] - beforePrevData[prop]}</span> :\r\n                <span style={{color: 'green'}}>+{prevData[prop] - beforePrevData[prop]}</span>}\r\n            </StatLastData>\r\n          ))}\r\n        </LastData>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\n\r\nexport const findLocation = (data, locationName) => {\r\n  const searchString = locationName.toLowerCase().trim();\r\n  return data.find(el => {\r\n    const { en, ru } = el;\r\n    return en.toLowerCase() === searchString || ru.toLowerCase() === searchString;\r\n  });\r\n};\r\n","import React from 'react';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip } from 'recharts';\r\n\r\nconst translations = {\r\n  confirmed: 'Подтвержденных диагнозов',\r\n  cured: 'Выздоровели',\r\n  deaths: 'Скончались',\r\n};\r\n\r\n\r\nconst tooltipFormatter = (value, name) => [value, translations[name] || name];\r\n\r\nconst VirusChart = ({ location, isMobile } )  => {\r\n  const { statistics: placeData } = location;\r\n  const placeDaysWeeks = placeData.map(el => ({\r\n    ...el,\r\n    date: el.date.slice(5, 10),\r\n  }));\r\n  const width  = isMobile ? window.innerWidth - 40 :  450;\r\n\r\n  return (\r\n    <LineChart width={width} height={240} data={placeDaysWeeks}>\r\n      <XAxis dataKey='date'/>\r\n      <YAxis width={55}/>\r\n      <CartesianGrid strokeDasharray=\"0.5 1\"/>\r\n      <Tooltip formatter={tooltipFormatter}  wrapperStyle={{zIndex: 222}}/>\r\n      <Line type=\"monotone\" dataKey=\"confirmed\" stroke=\"red\" r={1}/>\r\n      <Line type=\"monotone\" dataKey=\"cured\" stroke=\"#82ca9d\" r={1}/>\r\n      <Line type=\"monotone\" dataKey=\"deaths\" stroke=\"black\"  r={1} />\r\n    </LineChart>\r\n  );\r\n};\r\n\r\nexport default VirusChart;","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {CloseSquareTwoTone} from '@ant-design/icons'\r\nimport { showLastData } from './utils';\r\nimport LineChart from './VirusChart';\r\nimport styled from 'styled-components';\r\n\r\n\r\nconst RelativeForGraphics = styled.div`\r\n  position: relative;\r\n  margin: 2px;\r\n  box-shadow: 2px 2px 5px 0 #0000005c;\r\n  width: ${({isMobile}) => isMobile ? '100%' : '48%'}\r\n`;\r\nconst LastStatistic = styled.div`\r\n    position: absolute;\r\n    display: flex;\r\n    top: 45px;\r\n    left: 68px;\r\n    @media (max-width: 900px) {\r\n      position: initial;\r\n      justify-content: center;\r\n    }\r\n`;\r\nconst LocationName = styled.h3`\r\n  text-align: center;\r\n  font-size: larger;\r\n  text-transform: capitalize;\r\n`;\r\n\r\nconst CloseButton = styled.span`\r\n  position: absolute;\r\n  cursor: pointer;\r\n  top: 5px;\r\n  right: 5px;\r\n  font-size: 22px;\r\n`;\r\n\r\nclass Chart extends PureComponent {\r\n  render() {\r\n    const { location, title, onRemoveChart,isMobile } = this.props;\r\n    return (\r\n      <RelativeForGraphics isMobile={isMobile}>\r\n        <CloseButton onClick={() => onRemoveChart(title)}><CloseSquareTwoTone/></CloseButton>\r\n        <LocationName>{title}</LocationName>\r\n        <LineChart location={location} isMobile={isMobile}/>\r\n        <LastStatistic>\r\n          {showLastData(location)}\r\n        </LastStatistic>\r\n      </RelativeForGraphics>\r\n    );\r\n  }\r\n}\r\n\r\nChart.propTypes = {\r\n  location: PropTypes.object.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  onRemoveChart: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Chart;","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styled from 'styled-components';\r\nimport Chart from './Chart/Chart';\r\nimport { findLocation } from './Chart/utils';\r\n\r\nconst Graphics = styled.div`\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nclass ChartsList extends PureComponent {\r\n  render () {\r\n    const { data, selected, onRemoveChart, isMobile } = this.props;\r\n    return (\r\n      <Graphics isMobile={isMobile}>\r\n        {selected.map((locationName, index) => {\r\n          const locationData = findLocation(data, locationName);\r\n          if (!locationData) {\r\n            return null;\r\n          }\r\n          return (\r\n            <Chart key={index + locationName}\r\n                   location={locationData}\r\n                   title={locationName}\r\n                   onRemoveChart={onRemoveChart}\r\n                   isMobile={isMobile}/>\r\n          );\r\n        })\r\n        }\r\n      </Graphics>\r\n    );\r\n  }\r\n}\r\n\r\nChartsList.propTypes = {\r\n  data: PropTypes.array.isRequired,\r\n  selected: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  onRemoveChart: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ChartsList;\r\n\r\n\r\n","export const API_URL = 'https://cors-anywhere.herokuapp.com/coronavirus-monitor.ru/jquery-lite-9.js?a=12';\r\n\r\nexport const FIREBASE_URL = 'https://covid-graphics.firebaseio.com/countClick/Y2GOto1ZFv60LRoynclT';\r\n\r\n\r\nexport const INITIAL_LOCATIONS = ['россия', 'москва', 'санкт-петербург', 'воронежская область', 'белгородская область', 'калининградская область'];","import React, {useState} from  'react';\r\nimport { Button, Input, Tooltip } from 'antd';\r\nimport styled from 'styled-components';\r\nimport './Search.css';\r\n\r\nconst SearchGroup = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  margin: 0 auto;\r\n  padding: 10px 0;\r\n  max-width: 720px;\r\n  @media (max-width: 900px) {\r\n      max-width: 100%;\r\n      margin: 0 3px;\r\n      padding: 5px 0;\r\n      margin-bottom: 10px;\r\n    }\r\n     \r\n`;\r\nconst FilteredLocations = styled.div`\r\n    position: absolute;\r\n    width: 100%;\r\n    text-align: left;\r\n    margin-top: 32px;\r\n    z-index: 989;\r\n    cursor: default;\r\n`;\r\nconst FilteredLocationStyle = styled.div`\r\n    background: #fff;\r\n    display: flex;\r\n    flex-direction: column;\r\n    list-style-type: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    border: 0;\r\n    border-radius: 0 0 15px 15px;\r\n    box-shadow: 0 4px 6px 0 rgba(32,33,36,0.28);\r\n    padding-bottom: 4px;\r\n    overflow: hidden;\r\n`;\r\nconst TextInFindPlaced = styled.div`\r\n    display: flex;\r\n    flex: auto;\r\n    justify-content: space-between;\r\n    min-width: 0;\r\n    max-height: none;\r\n    padding: 6px 0;\r\n    :hover {\r\n      background-color: #eee;\r\n    }\r\n`;\r\nconst List = styled.ul`\r\n  padding: 0;\r\n  margin: 0;\r\n  list-style: none;\r\n`;\r\nconst Text = styled.span`\r\n  margin: 0 11px;\r\n`;\r\n\r\nwindow.onscroll = function showHeader() {\r\n  const header = document.getElementById('header');\r\n  if (header) {\r\n    if (window.pageYOffset > 30) {\r\n      header.classList.add('header-fixed');\r\n    }\r\n    else {\r\n      header.classList.remove('header-fixed');\r\n    }\r\n  }\r\n};\r\n\r\nconst Search = ({ search, onChange, onAddPlace,filteredLocations, locationsData, isMobile}) => {\r\n  const [isFilteredLocations, onChangeIsFilteredLocation] = useState(false);\r\n\r\n  const handleFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    onAddPlace();\r\n  };\r\n  const handleInputChange = (e) => {\r\n    onChangeIsFilteredLocation(true);\r\n    if(e.target.value === '') {\r\n      onChangeIsFilteredLocation(false);\r\n    }\r\n    onChange(e)\r\n  };\r\n  const confirmedInLocation = (location) => {\r\n    const locationData = locationsData.find((e) => e.en === location) || locationsData.find((e) => e.ru === location);\r\n    return locationData.confirmed\r\n  };\r\n  const inputStyle = !isFilteredLocations ? '15px 0px 0px 15px' : '15px 0 0 0';\r\n  const btnStyle = !isFilteredLocations ? '0px 15px 15px 0px' : '0 15px 0 0';\r\n  return (\r\n    <form onSubmit={handleFormSubmit}>\r\n    <SearchGroup id='header'>\r\n        <Input placeholder='Введите название' style={{borderRadius: inputStyle}}  value={search} onChange={handleInputChange} onBlur={f=>f}/>\r\n        <Tooltip title=\"search\">\r\n          <Button style={{borderRadius: btnStyle}} type=\"primary\">{isMobile ? 'Добавить' : 'Добавить место'}</Button>\r\n        </Tooltip>\r\n        {!!filteredLocations.length && <FilteredLocations>\r\n          <FilteredLocationStyle>\r\n            <List>\r\n              {filteredLocations.splice(0,5).map((location,index) => <li key={location + index} onClick={() => onAddPlace(location)}>\r\n                <TextInFindPlaced>\r\n                  <Text><b>{location}</b></Text>\r\n                  <Text>{confirmedInLocation(location)} Подтверженных диагнозов</Text>\r\n                </TextInFindPlaced></li>)}\r\n            </List>\r\n          </FilteredLocationStyle>\r\n        </FilteredLocations>}\r\n    </SearchGroup>\r\n    </form>\r\n  )\r\n};\r\n\r\nexport default Search;\r\n\r\n\r\n","import axios from 'axios';\r\nimport {API_URL} from '../contants';\r\n\r\n\r\n\r\n\r\n\r\nconst DataApi = {\r\n  getStats: () => axios.get(API_URL).then(({ data: dataString }) => {\r\n    // find beginning of the text contents\r\n    const dataContent = dataString.substring(dataString.indexOf('{'));\r\n    const data = JSON.parse(dataContent);\r\n    const { cities, countries, russianSubjects } = data;\r\n\r\n    return [\r\n      ...cities.data.cities,\r\n      ...countries.data.countries,\r\n      ...russianSubjects.data.subjects,\r\n    ];\r\n  }).catch(e => {\r\n    console.log(e);\r\n    return {};\r\n  }),\r\n};\r\n\r\nexport default DataApi;\r\n\r\n","import React, {Component} from 'react';\r\nimport {debounce} from 'lodash'\r\n\r\n\r\nconst MOBILE_THRESHOLD = 900;\r\n\r\n\r\nconst withIsMobile = ComponentToExtend => {\r\n  return class WithIsMobile extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        isMobile: false\r\n      };\r\n      this.checkIfIsMobile = debounce(this.checkIfIsMobile, 1000);\r\n    }\r\n\r\n    checkIfIsMobile = () => {\r\n      const screenWidth = window.innerWidth;\r\n      const isMobile = screenWidth < MOBILE_THRESHOLD;\r\n      this.setState({isMobile})\r\n    };\r\n\r\n    componentDidMount() {\r\n      this.checkIfIsMobile();\r\n      window.addEventListener('resize', this.checkIfIsMobile);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      window.removeEventListener('resize', this.checkIfIsMobile)\r\n    }\r\n\r\n    render() {\r\n      return <ComponentToExtend isMobile={this.state.isMobile}/>\r\n    }\r\n  }\r\n};\r\n\r\nexport default withIsMobile;","import React, { Component, Fragment } from 'react';\r\nimport styled, { createGlobalStyle } from 'styled-components';\r\nimport Loader from './components/UI/Loader/Loader';\r\nimport ChartsList from './components/ChartsList';\r\nimport { INITIAL_LOCATIONS } from './contants';\r\nimport Search from './components/Search/Search';\r\nimport { message } from 'antd';\r\nimport DataApi from './api';\r\nimport withIsMobile from \"./HOCs/withIsMobile\";\r\nimport {LineChartOutlined} from '@ant-design/icons'\r\n\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  @import url(\"https://fonts.googleapis.com/css?family=Inconsolata&display=swap\");\r\n  body {\r\n    background-color: #eee;\r\n    font-family: 'Inconsolata', monospace;\r\n    height: auto;\r\n    @media (max-width: 1024px) {\r\n      background: none;\r\n    }\r\n  };\r\n`;\r\nconst Container = styled.div`\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  border: 2px solid #eee;\r\n  border-radius: 7px;\r\n  background-color: white;\r\n  @media (max-width: 1024px) {\r\n        width: 100%;\r\n        border: none;\r\n        padding: 0;\r\n    }\r\n`;\r\n\r\nconst CovidGraphics = styled.h1`\r\n  margin: 0;\r\n  text-align: center;\r\n`;\r\n\r\n\r\n\r\nclass App extends Component {\r\n    state = {\r\n      search: '',\r\n      locationsData: {},\r\n      filteredLocations: [],\r\n      selectedLocations: localStorage.selectedLocations ? localStorage.selectedLocations.split(',') : [...INITIAL_LOCATIONS],\r\n      isLoading: false,\r\n    };\r\n\r\n\r\n\r\n\r\n    componentDidMount() {\r\n      this.setState({ isLoading: true });\r\n      DataApi.getStats().then(res => {\r\n        this.setState({ locationsData: res, isLoading: false });\r\n      });\r\n      window.onbeforeunload = this.saveLocations;\r\n    }\r\n\r\n\r\n\r\n    saveLocations = () => {\r\n      const { selectedLocations } = this.state;\r\n      localStorage.setItem('selectedLocations', selectedLocations);\r\n    };\r\n\r\n  filterLocation = (value) => {\r\n    const {locationsData} = this.state;\r\n    const search = value.toLowerCase().trim();\r\n    const filteredDataRu = locationsData.filter((el) => el.ru.slice(0,search.length).toLowerCase().includes(search));\r\n    const filteredDataEn = locationsData.filter((el) => el.en.slice(0,search.length).toLowerCase().includes(search));\r\n    return [...filteredDataRu.map((el) => el.ru), ...filteredDataEn.map((el) => el.en)];\r\n  };\r\n\r\n  handleSearchChange = ({ target: { value } }) => {\r\n    const filteredLocations = value ? [...new Set(this.filterLocation(value))] : [];\r\n    this.setState({\r\n      search: value,\r\n      filteredLocations: filteredLocations\r\n    });\r\n  };\r\n\r\n\r\n\r\n  handleClickOutSearch = () => {\r\n    this.setState({\r\n      filteredLocations: []\r\n    })\r\n  };\r\n\r\n    handleAddPlace = (place) => {\r\n      const { locationsData, selectedLocations } = this.state;\r\n      let {search} = this.state;\r\n      if (place) {\r\n        search = place\r\n      }\r\n      const searchedPlace = search.toLowerCase().trim();\r\n      if (selectedLocations.map(el => el.toLowerCase()).includes(searchedPlace)) {\r\n        message.error('График по выбранному месту уже есть в списке');\r\n        return;\r\n      }\r\n      const allKnownLocations = locationsData.reduce((acc, location) => {\r\n        acc.push(location.en.toLowerCase());\r\n        acc.push(location.ru.toLowerCase());\r\n        return acc;\r\n      }, []);\r\n      const locationFound = allKnownLocations.find(el => el === searchedPlace);\r\n      if (locationFound) {\r\n        message.info('Место найдено, график добавлен');\r\n        this.setState({\r\n          selectedLocations: [searchedPlace, ...selectedLocations],\r\n          search: '',\r\n          filteredLocations: []\r\n        });\r\n      }\r\n      else {\r\n        message.error('По выбранному месту отсутствует статистика');\r\n      }\r\n    };\r\n\r\n  handleRemoveLocation = locationName => {\r\n    this.setState(({ selectedLocations }) => ({\r\n      selectedLocations: selectedLocations.filter(el => el !== locationName),\r\n    }));\r\n  };\r\n\r\n\r\n\r\n  render() {\r\n    const {isMobile} = this.props;\r\n    const {  search, locationsData, selectedLocations, isLoading, filteredLocations } = this.state;\r\n\r\n\r\n    return (\r\n      <Container onClick={this.handleClickOutSearch}>\r\n        <GlobalStyle/>\r\n        {isLoading ? <Loader/> : (\r\n          <Fragment>\r\n            <CovidGraphics>Covid Graphics <LineChartOutlined/></CovidGraphics>\r\n            <Search\r\n              search={search}\r\n              onAddPlace={this.handleAddPlace}\r\n              onChange={this.handleSearchChange}\r\n              filteredLocations={filteredLocations}\r\n              locationsData={locationsData}\r\n              isMobile={isMobile}\r\n            />\r\n\r\n            {!!locationsData.length && (\r\n              <ChartsList\r\n                isMobile={isMobile}\r\n                data={locationsData}\r\n                selected={selectedLocations}\r\n                onRemoveChart={this.handleRemoveLocation}\r\n              />\r\n            )}\r\n          </Fragment>\r\n        )}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withIsMobile(App);\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport 'antd/dist/antd.css';\r\n\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}